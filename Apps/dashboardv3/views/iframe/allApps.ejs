<!DOCTYPE html>

<html>
  <head>
    <%- partial('header_partial') %>
    <link rel="stylesheet" href="css/allApps.css" />
    <script src="js/allApps.js"></script>
  </head>
  <body>
    <content class="body">
      <ul class="apps-list">
        <% for (var i = 0; i < apps.length; i++) { %>
          <li>
          <div class="app-screenshot-container">
            <img data-app="<%= apps[i].handle %>" src='<%= cropping[apps[i].handle] ? "img/loading6.gif" : "screenshot/" + apps[i].handle %>' class="app-screenshot">
          </div>
          <div class="app-data">
            <div class="header">
              <p class="title"><%= apps[i].title %><span class="pipe">|</span>
              <% if (apps[i].published) { %>
                <span class="published">published</span><a id=<%= apps[i].handle %> class='publishLink' href="publish?app=<%= apps[i].handle %>"><button class="publish">update app</button></a>
              <% } else { %>
                <span class="drafts">draft</span><a id=<%= apps[i].handle %> class='publishLink' href="publish?app=<%= apps[i].handle %>"><button class="publish">publish app</button></a>
              <% } %>
              <p>last updated <%= apps[i].lastUpdated.getMonth() + "." + apps[i].lastUpdated.getDate() + "." + apps[i].lastUpdated.getFullYear() %></p>
            </div>
            <div class="divider"></div>
            <div class="content">
              <p class="description"><%= apps[i].desc %></p>
              <% if (apps[i].uses && apps[i].uses.types) { %>
                <p class="bold">Uses <%= apps[i].uses.types.join(', ') %></p>
              <% } else if (apps[i].uses) { %>
                <p class="bold">Uses <%= apps[i].uses.join(', ') %></p>
              <% } %>
              <div class="authorship-history">Authorship History
              </div>
            </div>
          </div>
          </li>
        <% } %>
      </ul>
    </content>
  </body>
</html>
